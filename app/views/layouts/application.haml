!!!
%html{"xml:lang" => "en", :lang => "en", :xmlns => "http://www.w3.org/1999/xhtml"}
  %head
    %meta{:content => "text/html; charset=utf-8", "http-equiv" => "Content-type"}
    = stylesheet_link_tag 'blueprint/screen.css', :media => 'screen, projection'
    = stylesheet_link_tag 'main.css', :media => 'screen, projection'
    = stylesheet_link_tag 'blueprint/print.css', :media => 'print'
    /
      [if lt IE 8]>
      = stylesheet_link_tag 'blueprint/ie.css', :media => 'screen, projection'
      <![endif]
    = yield(:page_specific_stylesheets)
    
    = javascript_include_tag :defaults
    = yield(:javascript)
    
    %title Active geohasher
    
  - @body_attributes ||= {}
  %body{@body_attributes}
    .container
      .span-24.header_area
        .span-16
          = image_tag('geohashing_logo.gif', :class => 'header_logo')
          %h1.header_text Active geohasher
            
        .span-8.last{:style => "text-align:right;"}
          = render :partial => 'layouts/authentication'
          - if !logged_in?
            = link_to(image_tag('what_is_geohashing.png', :alt => "What is geohashing?", :size => '300x50'), what_is_geohashing_path)
        
      - if flash[:success]
        .flash.success.span-24= flash[:success]
      - if flash[:notice]
        .flash.notice.span-24= flash[:notice]
      - if flash[:error]
        .flash.error.span-24= flash[:error]
          
      - if logged_in?
        = render :partial => 'layouts/navigation'
        
      .span-24
        = yield

      .span-24.footer
        Active geohasher
        |
        = link_to('privacy policy', privacy_path)
        |
        = link_to('what is geohashing?', what_is_geohashing_path)
        |
        = link_to('source code', 'http://github.com/sermoa/active_geohasher')
 
    = yield(:post_page_load_javascript)
    
    :javascript
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
      
    :javascript
      try {
        var pageTracker = _gat._getTracker("UA-11145559-1");
        pageTracker._trackPageview();
      } catch(err) {}

